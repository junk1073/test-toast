# Тестовое задание: React Toast Notification System

## Цель:

Оживить систему уведомлений в предоставленном шаблоне (`test-toast.zip`). У вас есть готовая верстка и структура файлов, но отсутствует логика.

## Задача:

Реализовать функционал Toast, чтобы можно было вызывать уведомления из любой части приложения. (см. закомментированный код в `App.tsx`) Реализовать жизненный цикл уведомления в `src/components/ToastItem.tsx` (таймеры, удаление)

## Ограничения:

1. Нельзя использовать сторонние библиотеки для уведомлений.
2. Стили в `App.css` уже написаны, нужно корректно встроить компоненты в существующую верстку.

## Требования к бизнес-логике:

### 1) Умный таймер (Smart Timer).

Уведомление должно исчезать через заданное время (`duration`). При наведении курсора мыши на уведомление таймер должен вставать на паузу. Когда курсор уходит, таймер должен продолжить отсчет с того момента, где остановился. Таймер **НЕ** должен сбрасываться в начало (если прошло 2 сек из 3-х, после паузы должна остаться 1 сек).

### 2) Анти-спам и дедупликация.

Если вызывается тост с таким же текстом и типом, который уже есть на экране — новый тост создавать **НЕ** нужно. Вместо этого нужно обновить таймер существующего тоста (сбросить его в начало, чтобы он провисел дольше)

### 3) Тестирование.

Написать минимум 1 тест (**Vitest** или **Jest** + **React Testing Library**). Тест должен проверять бизнес-логику, а не просто верстку.

Пример сценария для теста: проверить, что при наведении курсора (`mouseEnter`) таймер действительно останавливается, и тост не исчезает спустя положенное время.

## Будет плюсом:

- Если вы реализуете анимацию появления/исчезновения (`mount`/`unmount`).
- Если вы напишете более 1 теста для бизнес-логики.

## Сдача:

Ссылка на GitHub репозиторий или архив.


# Отчет по тестовому заданию:

## Цель
Создать систему уведомлений (Toast) без сторонних библиотек с возможностью:
- Автоматического исчезновения тостов через заданное время.
- Паузы таймера при наведении курсора на тост.
- Дедупликации уведомлений с одинаковым текстом и типом.
- Плавной анимации появления/исчезновения.
- Возможностью тестирования бизнес-логики.

---

## Реализация

### 1. Контекст тостов (`ToastContext.tsx`)
- Используется `React.createContext` для хранения состояния всех тостов.
- Функция `addToast`:
  - Проверяет наличие тоста с одинаковым текстом и типом.
  - Если есть — сбрасывает таймер (свойство `reset`) вместо создания нового.
  - Если нет — создаёт новый тост с уникальным `id`.
- Функция `removeToast` удаляет тост по `id`.
- Контекст экспортируется через `useToast()` для удобного использования в любом компоненте.

✅ Реализовано умное управление таймером и дедупликация.

---

### 2. Компонент тоста (`ToastItem.tsx`)
- Таймер тоста реализован через `setInterval` и хранит оставшееся время в поле `_remaining` внутри объекта тоста.
- Пауза таймера при `onMouseEnter` и продолжение при `onMouseLeave`.
- Поддержка сброса таймера при повторном вызове (`reset`).
- Анимация:
  - `toast-show` — тост появляется плавно.
  - `toast-hide` — тост исчезает с плавным сдвигом и прозрачностью.
  - Анимация длится 0.6 секунды для плавного визуального эффекта.
- Кнопка закрытия (`x`) принудительно скрывает тост с анимацией.

✅ Реализован Smart Timer, плавная анимация и ручное удаление тостов.

---

### 3. Список тостов (`ToastList.tsx`)
- Рендерит все тосты из контекста через компонент `ToastItem`.
- Контейнер `.toast-list` позиционируется абсолютно в верхнем правом углу экрана.
- Поддерживает любой набор тостов.

---

### 4. Тесты (`ToastItem.test.tsx`)
- Использован `Vitest` + `React Testing Library`.
- Тесты проверяют бизнес-логику, а не просто верстку:
  1. Проверка отображения тоста и корректной работы таймера.
  2. Проверка паузы таймера при наведении курсора.
  3. Проверка сброса таймера при повторном вызове тоста с тем же текстом и типом.
- Таймеры подменяются с помощью `vi.useFakeTimers()` для точного контроля.

✅ Тесты покрывают ключевую логику: Smart Timer, пауза, дедупликация.

---

### 5. Стили (`App.css`)
- Цветовая схема для разных типов тостов (`success`, `error`, `warning`, `info`).
- Плавная анимация через CSS `transition`:
  transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out;
- Контейнер и кнопки стилизованы под современный темный интерфейс.
- Комментарии добавлены для наглядности, что и где было сделано.

---

### 6. Особенности реализации
- Полностью написано без сторонних библиотек для уведомлений.
- Поддержка кастомной длительности для каждого тоста.
- Возможность приостановки таймера на лету.
- Плавное появление и исчезновение тостов.
- Проект типизирован на TypeScript.
- Тесты проверяют реальную логику, а не только отображение.

---

### 7. Использование
1. Импортировать `ToastProvider` и обернуть им приложение.
2. Использовать `useToast()` в любом компоненте для добавления тостов:
   const { addToast } = useToast();
   addToast({ message: 'Успех!', type: 'success', duration: 3000 });
3. Контейнер `ToastList` должен быть размещён в верстке один раз:
   <ToastList />

---

### 8. Комментарии о проделанной работе
- Реализованы все требования тестового задания.
- Добавлены анимации появления/исчезновения.
- Добавлены комментарии в коде для наглядности.
- Тесты написаны и проходят успешно.
- Классы CSS унифицированы (`toast-list`, `toast-show`, `toast-hide`).
